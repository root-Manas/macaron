# Macaron AI Memory

## Project Overview
**Macaron** - Security Reconnaissance Platform for Linux
- Single-file Python CLI tool (`macaron`)
- YAML-based pipeline configuration
- Installs to `/usr/local/bin/macaron`

## Architecture
```
macaron (single file, ~2500 lines)
├── Pipeline engine (YAML-based stages)
├── Tool orchestration (Go, Python, system tools)
├── Discord webhook notifications
├── Screenshot gallery generator
└── Rich CLI interface
```

## Key Directories
- `~/.macaron/data/` - Scan results per domain
- `~/.macaron/config/` - pipeline.yaml, config.yaml
- `~/.macaron/logs/` - Scan logs
- `~/.macaron/wordlists/` - Fuzzing wordlists

## Current Version: 2.4.2

## Recent Changes (2.4.2)
- Removed x8 tool (Rust dependency)
- Fixed Go tool name extraction (v2/v3/cmd paths)
- Fixed CRLF line endings for Linux
- Added .gitattributes for LF enforcement
- Improved installer error handling

## CLI Flags
| Flag | Description |
|------|-------------|
| `-s TARGET` | Scan target(s) |
| `-S` | Show status |
| `-R` | Show results |
| `-G` | Generate screenshot gallery |
| `-L` | List installed tools |
| `-U` | Self-update |
| `-E` | Export results |
| `-I` | Install recon tools (sudo) |
| `-C` | Show config |
| `-P` | Show pipeline path |
| `-m MODE` | Scan mode (wide/narrow/fast/osint/deep) |
| `-f` | Fast mode |
| `-n` | Narrow mode |
| `-d DOMAIN` | Filter by domain |
| `-o FILE` | Output file |
| `--webhook URL` | Discord webhook |

## Scan Modes
- **wide** - Full infrastructure recon (default)
- **narrow** - Application-focused
- **fast** - Quick wins
- **osint** - Passive reconnaissance
- **deep** - Comprehensive scan

## Tool Categories
1. Subdomain: subfinder, amass, assetfinder, findomain
2. DNS: dnsx, massdns, dnsrecon
3. Ports: naabu, masscan, nmap
4. HTTP: httpx, httprobe
5. URLs: gau, waybackurls, katana, hakrawler
6. JS: getJS, subjs, linkfinder
7. Screenshots: gowitness, eyewitness
8. Content: ffuf, feroxbuster
9. OSINT: theHarvester, shodan

## Testing
```bash
python -m pytest tests/ -q
```

## Installation
```bash
git clone https://github.com/root-Manas/macaron.git
cd macaron
sudo cp macaron /usr/local/bin/
sudo chmod +x /usr/local/bin/macaron
sudo macaron -I  # Install tools
```

## Known Issues
- Windows git may add CRLF; use .gitattributes to enforce LF
- Some tools require Go 1.21+
- nuclei templates need periodic updates

## Development Notes
- All edits must preserve LF line endings
- Test with `python -m py_compile macaron` before commit
- Run full test suite before pushing
- Version in line 52: `VERSION = "X.Y.Z"`

## Future Enhancements
- [ ] Screenshot gallery with HTML viewer
- [ ] More OSINT modules
- [ ] Cloud asset discovery
- [ ] API endpoint discovery
- [ ] Diff between scans
